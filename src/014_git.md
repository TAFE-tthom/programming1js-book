# Git - Version Control

We will be using `git`. This command is what helps power a lot of software development and collaboration. The way to view git is through the following lens:

* **Repositories**, locations in which source code is stored/committed to. There are local and remote repositories that you can **push**

* **Commit**, A commit is set of changes you have made to a repository. This could involve any files that have been `added`, `modified` or`deleted`. You can see `commit`s using `git log`.

* **Staging**, staging is a state **pre-commit**, when you make changes or add/delete files from the repository, these changes can be `staged`, as in ready for a `commit`. You can check the status of staged changes using `git status`.

* **Remote**, This is a repository that is usually on another computer (or server). Services like `github`, `codeberg` and `gitlab` usually allow developers to create a repository on their service and treat that repository as a remote one. You can have multiple `remote` repositories set up.

* **Cloning**, This is where we create a duplicate of a repository (typically one that is online) for our purposes locally. We are able to use `git clone <url>` where we can clone the repository and use it/modify it and commit back to it (assuming we have permissions) or have a **fork** of it (A derivative version).

## Cloning a repository

There are a set of exercises associated with this book. To get access to this repository, you can **clone** a repository to then get access and create a local copy on your device.

To access the set of exercises, you can do the following.

```
git clone https://github.com/TAFE-tthom/programming1-js.git
```

The above script will clone the repository and create a folder called `programming1-js`. If you want to pull any updates that may be made to the repository, you can use `git pull`.

Do note, the rest of the instructions in this section are related to creating and managing your own repositories.


## Initialising A Repo

You can initialise a repository using `git init` which will initialise a repository in the **current folder** you are in.

**Common Mistakes**

Over time, I have encountered many common mistakes people have made with git and I will list one for each part to ensure you check for it.

For initialisation:

* Make sure you **initialised** it for the intended **folder**, **do not initialise** a git repository in your home drive, each project should be considered a separate repository.

To undo this mistake, you can identify a repository using `git status` which will indicate if it is a repository or not, you can then find the `.git` folder (which is hidden so use `ls -la`) and delete it.

## Adding to staging

As part of the guide, create a file called `hello.txt` which can contain the text `Hello Git!`.

If you type `git status`, this will show the current state of changes that have been staged, tracked and not.

You will notice the outcome from `git status` will state:

```
Untracked files:
  (use "git add <file>..." to include in what will be committed)

  hello.txt
```

This is because `hello.txt` is currently untracked, we can add it to staging by running `git add hello.txt`.

Running `git status` will show:

```
Changes to be committed:
  (use "git restore --staged <file>..." to unstage)
	modified:   lesson.txt
```

**Common Mistakes**

* It is common for people to add a file to staging but then to modify it after the fact, you will need to re-add this again if you modified it but did not make a commit which would save those changes.

## Commit

You can now create a `commit`, to do so, you can call `git commit -m <message>`, where `message` is a string in single or double quotes that outlines what the commit is doing. A convention in software development is to associate particular commits with a label like:

* FIX
* CHORE
* FEAT or FEATURE
* REVERT

Example of `git commit` usage:

`git commit -m 'FIX: scaling bug associated with the grid'`

**Common Issues**

* When you run `git commit` with a valid message associted, you may get prompted to set a username and email, these relate to authoring the of the commit. You will need to use:

```
git config --global user.email '<your email>' 
git config --global user.name '<your name>'
```

After you have done that, re-run the commit command again.

## Using a remote (Setting up an account)

If you have not already got one, you need to register for a `github` account for this particular task, however!
Feel free to consider other hosting alternatives like:

* `codeberg`
* `gitlab`
* `bitbucket`

You can even host it yourself if you happen to have access to a VPS.

After you have created an account, you will need to create a repository on their website.

## Before you add the remote to your local

You will need to generate an **SSH Key**, to do this, you will need to generate a key using `ssh-keygen` command which will generate a key-pair (public key and private key).

Generate a key pair using `ssh-keygen`, use the default settings and you can ignore giving it a passphrase when requested. Once it has been generated, you can use the `<id>.pub` file in `~/.ssh`.

Copy the contents of the `.pub` file, go to Github and go to:

* Settings Slide Panel (It will correspond to the top-right of the page where your profile display picture is)

* Click on `Settings`

* Click on `SSH and GPG keys`

* Click on `New SSH key`.

* Specify the title `TAFEDemo` and paste the contents into the textbox with the `Key` label above it. Then click `Add SSH Key`.

**Common Mistake**

* It is common for people to copy the contents of the `private` key (file without an extension).

## Using a remote (Creating a repository)

You can use `Create New` on the github page on the topbar which will show as a `+`.

This will allow you to create a new repository, provide a name and description, you can then proceed to `Create Repository`.

Afterwards you can then use the `SSH` link as part of the repository creation and setting a remote to your repository using `git remote add origin <url>`. `origin` is just a name for the remote while the url is the actual location.

Once added, you can `push` the commits to the remote repository, this will synchronise your changes with the remote repository. You can do this with `git push`, if this is the first time, you will need to do `git push -u origin main`.

## Git Checklist

Make sure you have satisified the following:

1. You have created a local repository
2. You have added a file to your local repository
3. You have made a commit to your local repository
4. You have created an account on github (or another service)
5. You have created an ssh-key and added the public key to your account
6. You have set a remote to your local repository
7. You have pushed the changes and can see them on the website.

